<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>智能车</title>
	<!-- Bootstrap -->
	<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
	<!-- Font-awesome -->
	<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
	<!-- Animate -->
	<link rel="stylesheet" type="text/css" href="css/animate.css">
	<!-- Page.css -->
	<link rel="stylesheet" type="text/css" href="css/pageNav.css">

	<link rel="stylesheet" type="text/css" href="css/bootstrap-select.min.css">

	<link rel="stylesheet" type="text/css" href="css/pageNav.css">
	<!-- Main -->
	<link rel="stylesheet" type="text/css" href="css/main.css">
</head>

<body style="">
	<div class="container">
		<div class="row">
			<div class="col-sm-12">
				<div class="row header" style="background-color: #171717;display: block;">
					<div class="logo col-sm-8 col-sm-offset-1 col-xs-6">
						<img src="./image/autocar_logo.png" style="width: 100px;margin-right: 10px;">智能车云平台</div>
					<div class="header-right">
						<img src="" class="user-picture">
						<span class="user-name">
							<!-- admin -->
						</span>
						<a href="" onclick="logout()">退出</a>
					</div>
				</div>

				<div class="row">
					<div class="col-sm-2 col-md-2 col-xs-12 menu" style="height:80px;min-width: 130px;padding: 0; background-color: rgba(37,37,37,1);">
						<ul style="list-style: none;">
							<li class="col-sm-12 hidden-xs" style="height: 80px;line-height:80px; font-size: 1.2em;letter-spacing:3px">
								<i class="fa fa-navicon" style="font-size: 1.4em;"></i>
							</li>
							<li class="col-sm-12" onclick="javascript:window.location.href='map.html'">
								<i class="fa fa-map"></i>车辆分布
							</li>
							<li class="col-sm-12" onclick="javascript:window.location.href='dashboard.html'">
								<i class="fa fa-list-alt"></i>车辆概况
								<span class="green menu_number1">0</span>
								<!--<span class="red menu_number2" style="margin-left: 45px;">0</span>-->
							</li>
							<!-- <li class="col-sm-12" onclick="javascript:window.location.href='log.html'">
								<i class="fa fa-list-ol"></i>车辆日志
							</li> -->
							<li class="col-sm-12" onclick="javascript:window.location.href='warning.html'">
								<i class="fa fa-warning"></i>车辆异常
								<!--<span class="red menu_number3">0</span>-->
							</li>
							<li class="col-sm-12 menu_users" onclick="javascript:window.location.href='users.html'">
								<i class="fa fa-users"></i>用户管理
							</li>
							<!-- <li class="col-sm-12" onclick="javascript:window.location.href='car_type.html'">
								<i class="fa fa-truck"></i>车型管理
							</li> -->
							<li class="col-sm-12 menu_car" style="background-color: #EAEDEB;color: #000;">
								<i class="fa fa-car"></i>车辆管理
							</li>
							<li class="col-sm-12 menu_team" onclick="javascript:window.location.href='car_team.html'">
								<i class="fa fa-bicycle"></i>车队管理
							</li>
							<li class="col-sm-12 menu_push" onclick="javascript:window.location.href='push.html'">
								<i class="fa fa-envelope"></i>推送设置
							</li>
						</ul>
					</div>
					<div class="col-sm-10 control" style="background-color: #f4f3f2;">
						<div class="row general center">
							<div id="tab1" class="col-sm-1 tab tab-active">服役车辆</div>
							<div id="tab2" class="col-sm-1 tab">报废车辆</div>
							<div id="tab5" class="col-sm-1 tab">移交车辆</div>
							<div id="tab3" class="col-sm-1 tab">投放车辆</div>
							<div id="tab4" class="col-sm-1 tab">添加车型</div>
							<!-- <div class="search-online">
								<input type="text" name="search" placeholder="搜索关键字">
								<i class="fa fa-search" style="position: absolute;right: 15px; top: 8px; color: #ddd;font-size: 1.5em;"></i>
							</div> -->
						</div>
						<div class="row tab-content tab1-content show">
							<div class="col-sm-12 table-search">
								<label for="on-car-search">关键字：</label>
								<input type="text" name="on-car-search" id="on-car-search" onkeydown="keyup_submit(event,'on-car-search');">
								<button onclick="search('on-car-search')">搜索</button>
								<button onclick="reset('on-car-search')">重置</button>
							</div>
							<div class="col-sm-12 on-car">

							</div>
							<i class="clearfix"></i>
							<nav aria-label="Page navigation" class="page-nav-outer" id="page-on-car" style="height: 50px;"></nav>
						</div>

						<div class="row tab-content  tab2-content">
							<div class="col-sm-12 table-search">
								<label for="off-car-search">关键字：</label>
								<input type="text" name="off-car-search" id="off-car-search" onkeydown="keyup_submit(event,'off-car-search');">
								<button onclick="search('off-car-search')">搜索</button>
								<button onclick="reset('off-car-search')">重置</button>
							</div>
							<div class="col-sm-12 off-car">

							</div>
							<i class="clearfix"></i>
							<nav aria-label="Page navigation" class="page-nav-outer" id="page-off-car" style="height: 50px;"></nav>
						</div>

						<div class="row tab-content tab5-content">
							<div class="col-sm-12 table-search">
								<label for="off2-car-search">关键字：</label>
								<input type="text" name="off2-car-search" id="off2-car-search" onkeydown="keyup_submit(event,'off2-car-search');">
								<button onclick="search('off2-car-search')">搜索</button>
								<button onclick="reset('off2-car-search')">重置</button>
							</div>
							<div class="col-sm-12 off2-car">

							</div>
							<i class="clearfix"></i>
							<nav aria-label="Page navigation" class="page-nav-outer" id="page-off2-car" style="height: 50px;"></nav>
						</div>

						<div class="row tab-content tab3-content">
							<div>
								<div class="user-in col-sm-12 user-id">
									<span>发动机号:</span>
									<input type="text" name="" class="c-id" maxlength="20"/>
									<span style="font-size:  14px;width: 200px;margin: 0 0 0 10px;text-align: left;">长度小于20</span>
								</div>
								<div class="user-in col-sm-12 user-email">
									<span>车牌号:</span>
									<input type="text" name="" class="c-licence" maxlength="20"/>
									<span style="font-size:  14px;width: 200px;margin: 0 0 0 10px;text-align: left;">长度小于20</span>
								</div>
								<div class="user-in col-sm-12 user-email">
									<span>车辆VIN:</span>
									<input type="text" name="" class="c-unique" maxlength="20"/>
									<span style="font-size:  14px;width: 200px;margin: 0 0 0 10px;text-align: left;">长度小于20</span>
								</div>

								<div class="user-in col-sm-12 user-response user-response-tonone">
									<span>负责人:</span>
									<select id="selectpicker" class="selectpicker" multiple data-live-search="true" data-selected-text-format="count > 4">
									</select>
								</div>
								<div class="user-in col-sm-12 user-phone">
									<span>车型:</span>
									<select class="car-model" onchange="get_mark()"></select>
									<select class="car-mark" onchange="get_type()"></select>
									<select class="car-type"></select>
								</div>
								<div class="user-in col-sm-12 user-phone">
									<span>车辆信息:</span>
									<input type="file" name="" id="c-info-file" class="c-info-file" multiple="multiple">
									<span style="font-size:  14px;color:  red;">不能超过20M</span>
								</div>

								<button onclick="put_car()">投放</button>
							</div>
						</div>

						<div class="row tab-content tab4-content">
							<div class="add-car-model">
								<div class="user-in col-sm-12 car-modal">
									<span>车型:</span>
									<input type="text" name="" class="car-modal-input car-modal1" lzw="car-modal1" maxlength="20"/>
									<span style="font-size:  14px;width: 200px;margin: 0 0 0 10px;text-align: left;">长度小于20</span>
									<div class="car-search-content car-modal1-search">

									</div>
								</div>

								<div class="user-in col-sm-12 car-modal">
									<span>品牌:</span>
									<input type="text" name="" class="car-modal-input car-modal2" lzw="car-modal2" maxlength="20"/>
									<span style="font-size:  14px;width: 200px;margin: 0 0 0 10px;text-align: left;">长度小于20</span>
									<div class="car-search-content car-modal2-search">

									</div>
								</div>


								<div class="user-in col-sm-12 car-modal">
									<span>型号:</span>
									<input type="text" name="" class="car-modal-input car-modal3" lzw="car-modal3" maxlength="20"/>
									<span style="font-size:  14px;width: 200px;margin: 0 0 0 10px;text-align: left;">长度小于20</span>
									<div class="car-search-content car-modal3-search">

									</div>
								</div>

								<button onclick="add_car_model()">添加</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="car_file_list" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
	 style="top: 240px;">
		<div class="modal-dialog" style="width: 570px;">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel" style="font-size: 15px;color:red;">车辆详情请通过下载文件进行查看,增加车辆信息文件请点击上传文件</h4>
				</div>
				<div class="modal-body" style="max-height: 400px;overflow: auto;padding: 0;">
					<div class="file-list" style="font-size:0;margin-bottom:20px">

					</div>
				</div>
				<div class="modal-footer" style="border: none">
					<button type="button" class="btn btn-primary modal_push_file" data-toggle="modal" data-target="#car_file" onclick="put_info()">上传文件</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="car_file" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="top: 240px;">
		<div class="modal-dialog" style="width: 570px;">
			<div class="modal-content">
				<div class="modal-body">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<div class="row">
						<div class="user-in col-sm-12 user-phone">
							<span>车辆信息:</span>
							<input type="hidden" class="c_id2">
							<input type="file" name="" id="c-info-file2" class="c-info-file2" multiple="multiple" style="font-size: 1.1em">
							<span style="font-size:  14px;color:  red;">不能超过20M</span>
						</div>
						<button onclick="put_car_info()" class="put-car-info-button">上传</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="response_list" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
	 style="top: 240px;">
		<div class="modal-dialog" style="width: 570px;">
			<div class="modal-content">
				<div class="modal-body" style="max-height: 600px;overflow: auto;">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<div class="row">
						<div class="col-sm-12 response-list" style="font-size:0;margin-top: 20px;margin-bottom:20px">

						</div>
					</div>
				</div>
				<div class="modal-footer" style="border: none">
					<span>负责人:</span>
					<select id="selectpicker2" class="selectpicker" multiple data-live-search="true" data-selected-text-format="count > 4">
					</select>
					<button type="button" class="btn btn-primary modal_push_response" onclick="change_response()">修改</button>
				</div>
			</div>
		</div>
	</div>
	<!-- JQuery -->
	<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
	<script type="text/javascript">
		function change_height() {
			var width = $("body").width();
			if (width >= 766) {
				var height = $(window).height();
				$(".tab-content").height(function (n, c) {
					return height - 81 - 84 - 20;
				})

				var header_height = $(".header").height();
				$(".menu").height(function (n, c) {
					return height - header_height;
				});
				$(".control").height(function (n, c) {
					return height - header_height;
				});
			} else {
				$(".menu").height(60);
				$(".control").css('height', "auto");
				$(".menu").css("max-width", "100%");
				$(".menu").css("min-height", "0px");
			}
		}
		change_height();
		$(window).resize(function () {
			change_height();
		});

		$(".tab").on('click', function () {
			$(".tab-active").removeClass("tab-active");
			$(this).addClass("tab-active");
			var id = $(this).attr("id");
			$(".show").removeClass("show");
			$("." + id + "-content").addClass("show");
		});
		// $(".offline-title").on('click',function(){
		// 	$(".general").children().removeClass("is-online");
		// 	$(".offline-title").addClass("is-online");
		// 	$(".user-add").css("display","block");
		// 	$(".out-list").css("display","none");
		// 	$(".user-list").css("display","none");
		// });
		// $(".out-title").on('click',function(){
		// 	$(".general").children().removeClass("is-online");
		// 	$(".out-title").addClass("is-online");
		// 	$(".user-add").css("display","none");
		// 	$(".out-list").css("display","block");
		// 	$(".user-list").css("display","none");
		// })

		$(".filter-title").on("mouseover", function () {
			$(".filter-content").children().css("display", "none");
			var x = $(this).attr("data");
			$("." + x).css("display", "block");

		})
		$(".filter-title").on("mouseout", function () {
			var x = $(this).attr("data");
		})

	</script>
	<!-- Cookie -->
	<script type="text/javascript" src="js/jquery.cookie.js"></script>
	<!-- Layui -->
	<script type="text/javascript" src="layui/layui.all.js"></script>
	<!-- Waypoints -->
	<script type="text/javascript" src="js/jquery.waypoints.min.js"></script>
	<!-- Main -->
	<script type="text/javascript" src="js/main.js"></script>
	<!-- Bootstrap -->
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<!-- returnTologin -->
	<script type="text/javascript" src="js/returnTologin.js"></script>
	<!-- Page.js -->
	<script type="text/javascript" src="js/pageNav.js"></script>

	<script type="text/javascript" src="js/bootstrap-select.min.js"></script>

	<script type="text/javascript">
		var flag = true;
		$('.car-modal-input').on({
			compositionstart: function () { flag = false; },
			compositionend: function () { flag = true; },
			input: function () {
				var _this = this;
				setTimeout(function () {
					if (flag) {
						var which = $(_this).attr("lzw");
						var value = $(_this).val();
						search_type(which, value, true);
					}
				}, 0);
			}
		});

		$(".car-modal-input").focus(function () {
			var which = $(this).attr("lzw");
			$("." + which + "-search").css("display", "block");
			var value = $(this).val();
			search_type(which, value, false);
		})

		$(".car-modal-input").blur(function () {
			var _this = this;
			setTimeout(function () {
				var which = $(_this).attr("lzw");
				$("." + which + "-search").css("display", "none");
			}, 200);
		})


		$(".car-search-content").on("click", "div", function () {
			var text = $(this).text();
			var which = $(this).attr("lzw");
			$("." + which).val(text);
		})

		function search_type(which, value, type) {
			//console.log(which+" "+value);
			var search_content = [];
			var mark_array = [];
			if (which == "car-modal1") {
				mark_array = get_key(select_menu);
				if (type) {
					$(".car-modal2").val('');
					$(".car-modal3").val('');
				}
			}
			else if (which == "car-modal2") {
				var mark1_array = get_key(select_menu);
				var mark1 = $(".car-modal1").val();
				if (mark1 != "") {
					var child2 = select_menu[mark1];
					mark_array = get_key(child2);
					if (type) {
						$(".car-modal3").val('');
					}
				}
			}
			else if (which == "car-modal3") {
				var mark1_array = get_key(select_menu);
				var mark1 = $(".car-modal1").val();
				if (mark1 != "") {
					var child2 = select_menu[mark1];
					var mark2_array = get_key(child2);
					var mark2 = $(".car-modal2").val();
					if (mark2 != "") {
						var child3 = child2[mark2];
						for (var i = 0; i < child3.length; i++) {
							mark_array.push(child3[i].tpName);
						}
					}
				}
			}
			for (var i = 0; i < mark_array.length; i++) {
				if ((new RegExp(value)).test(mark_array[i])) {
					search_content.push(mark_array[i])
				}
			}

			$("." + which + "-search").html("");
			if (search_content.length == 0) {
				$("." + which + "-search").css("border", "none");
			}
			for (var i = 0; i < search_content.length; i++) {
				$("." + which + "-search").css("border", "1px solid #ddd");
				$("." + which + "-search").append('<div class="' + which + '-search-tab" lzw="' + which + '">' + search_content[i] + '</div>');
			}
		}
	</script>

	<script type="text/javascript" src="js/car.js"></script>
</body>

</html>