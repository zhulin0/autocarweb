<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>智能车</title>
	<!-- Bootstrap -->
	<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
	<!-- Main -->
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<!-- Font-awesome -->
	<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
	<!-- Animate -->
	<link rel="stylesheet" type="text/css" href="css/animate.css">
	<!-- Page.css -->
	<link rel="stylesheet" type="text/css" href="css/pageNav.css">
</head>

<body style="">
	<div class="container">
		<div class="row">
			<div class="col-sm-12">
				<div class="row header" style="background-color: #171717;display: block;">
					<div class="logo col-sm-8 col-sm-offset-1 col-xs-6">
						<img src="./image/autocar_logo.png" style="width: 100px;margin-right: 10px;">智能车云平台</div>
					<div class="header-right">
						<img src="" class="user-picture">
						<span class="user-name">
							<!-- admin -->
						</span>
						<a href="" onclick="logout()">退出</a>
					</div>
				</div>

				<div class="row">
					<div class="col-sm-2 col-md-2 col-xs-12 menu" style="height:80px;min-width: 130px;padding: 0; background-color: rgba(37,37,37,1);">
						<ul style="list-style: none;">
							<li class="col-sm-12 hidden-xs" style="height: 80px;line-height:80px; font-size: 1.2em;letter-spacing:3px">
								<i class="fa fa-navicon" style="font-size: 1.4em;"></i>
							</li>
							<li class="col-sm-12" onclick="javascript:window.location.href='map.html'">
								<i class="fa fa-map"></i>车辆分布
							</li>
							<li class="col-sm-12" onclick="javascript:window.location.href='dashboard.html'">
								<i class="fa fa-list-alt"></i>车辆概况
								<span class="green menu_number1">0</span>
								<!--<span class="red menu_number2" style="margin-left: 45px;">0</span>-->
							</li>
							<!-- <li class="col-sm-12" onclick="javascript:window.location.href='log.html'">
								<i class="fa fa-list-ol"></i>车辆日志
							</li> -->
							<li class="col-sm-12" onclick="javascript:window.location.href='warning.html'">
								<i class="fa fa-warning"></i>车辆异常
								<!--<span class="red menu_number3">0</span>-->
							</li>
							<li class="col-sm-12 menu_users" onclick="javascript:window.location.href='users.html'">
								<i class="fa fa-users"></i>用户管理
							</li>
							<!-- <li class="col-sm-12" onclick="javascript:window.location.href='car_type.html'">
								<i class="fa fa-truck"></i>车型管理
							</li> -->
							<li class="col-sm-12 menu_car" onclick="javascript:window.location.href='car.html'">
								<i class="fa fa-car"></i>车辆管理
							</li>
							<li class="col-sm-12 menu_team" style="background-color: #EAEDEB;color: #000;">
								<i class="fa fa-bicycle"></i>车队管理
							</li>
							<li class="col-sm-12 menu_push" onclick="javascript:window.location.href='push.html'">
								<i class="fa fa-envelope"></i>推送设置
							</li>
						</ul>
					</div>
					<div class="col-sm-10 control" style="background-color: #f4f3f2;">
						<div class="row general center">
							<div id="tab1" class="col-sm-1 tab tab-active">组建中车队</div>
							<div id="tab4" class="col-sm-1 tab">已组建车队</div>
							<div id="tab2" class="col-sm-2 tab">已解散车队</div>
							<!-- <div id="tab3" class="col-sm-1 tab">新建车队</div> -->
							<!-- <div class="search-online">
								<input type="text" name="search" placeholder="搜索关键字">
								<i class="fa fa-search" style="position: absolute;right: 15px; top: 8px; color: #ddd;font-size: 1.5em;"></i>
							</div> -->
						</div>
						<div class="row tab-content tab1-content show" style="overflow: auto">
							<div class="col-sm-12 table-search">
								<label for="is-on-team-search">头车ID：</label>
								<input type="text" name="is-on-team-search" id="is-on-team-search" onkeydown="keyup_submit(event,'is-on-team-search');">
								<button onclick="search('is-on-team-search')">搜索</button>
								<button onclick="reset('is-on-team-search')">重置</button>
							</div>
							<div class="col-sm-12 is-on-team">

							</div>
							<i class="clearfix"></i>
							<nav aria-label="Page navigation" class="page-nav-outer" id="page-is-on-team" style="height: 50px;">
						</div>

						<div class="row tab-content tab4-content">
							<div class="col-sm-12 table-search">
								<label for="on-team-search">头车ID：</label>
								<input type="text" name="on-team-search" id="on-team-search" onkeydown="keyup_submit(event,'on-team-search');">
								<button onclick="search('on-team-search')">搜索</button>
								<button onclick="reset('on-team-search')">重置</button>
							</div>
							<div class="col-sm-12 on-team">

							</div>
							<i class="clearfix"></i>
							<nav aria-label="Page navigation" class="page-nav-outer" id="page-on-team" style="height: 50px;">
						</div>

						<div class="row tab-content tab2-content">
							<div class="col-sm-12 table-search">
								<label for="off-team-search">头车ID：</label>
								<input type="text" name="off-team-search" id="off-team-search" onkeydown="keyup_submit(event,'off-team-search');">
								<button onclick="search('off-team-search')">搜索</button>
								<button onclick="reset('off-team-search')">重置</button>
							</div>
							<div class="col-sm-12 off-team">

							</div>
							<i class="clearfix"></i>
							<nav aria-label="Page navigation" class="page-nav-outer" id="page-off-team" style="height: 50px;">
						</div>

						<div class="row tab-content tab3-content">
							<div>
								<div class="user-in col-sm-12 user-id">
									<span>车队名:</span>
									<input type="text" name="" class="teamName">
								</div>
								<div class="user-in col-sm-12 user-email">
									<span>添加车辆:</span>
									<select class="add-car">
										<option>选择车辆</option>
									</select>
								</div>
								<div class="user-in col-sm-12">
									<span></span>
									<div class="the-car">

									</div>
								</div>
								<div class="user-in col-sm-12 user-phone">
									<span>头车:</span>
									<select class="choose_leader"></select>
								</div>

								<button onclick="create_team()" style="width: 250px;">创建</button>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="team_detail1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="top: 240px;">
		<div class="modal-dialog" style="width: 570px">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<h4 class="modal-title" id="myModalLabel">
						车队详情
					</h4>
				</div>
				<div class="modal-body" style="padding:0;max-height: 400px;overflow: auto;">
					<div class="team-list" style="font-size:0;margin-bottom:20px">
					</div>
				</div>
				<div class="modal-footer" style="border: none;">
					<button type="button" class="btn btn-primary modal_team_position" onclick="team_position()">车队位置</button>
					<button type="button" class="btn btn-primary modal_team_route" onclick="team_route()">车队轨迹</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="team_detail2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="top: 240px;">
		<div class="modal-dialog" style="width: 570px">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<h4 class="modal-title" id="myModalLabel">
						车队详情
					</h4>
				</div>
				<div class="modal-body" style="padding:0;max-height: 400px;overflow: auto;">
					<div class="team-list" style="font-size:0;margin-bottom:20px">
					</div>
				</div>
				<div class="modal-footer" style="border: none;">
					<button type="button" class="btn btn-primary modal_team_position" onclick="team_position()">车队位置</button>
					<button type="button" class="btn btn-primary modal_team_route" onclick="team_route()">实时轨迹</button>
					<button type="button" class="btn btn-primary modal_old_team_route" onclick="old_team_route()">历史轨迹</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="team_detail3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="top: 240px;">
		<div class="modal-dialog" style="width: 570px">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<h4 class="modal-title" id="myModalLabel">
						车队详情
					</h4>
				</div>
				<div class="modal-body" style="padding:0;max-height: 400px;overflow: auto;">
					<div class="team-list" style="font-size:0;margin-bottom:20px">
					</div>
				</div>
				<div class="modal-footer" style="border: none;">
					<button type="button" class="btn btn-primary modal_old_team_route" onclick="old_team_route()">历史轨迹</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="top: 240px;">
		<div class="modal-dialog" style="width: 785px;">
			<div class="modal-content">
				<div class="modal-body">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<div class="car">
						<div>
							<div class="col-sm-4 car-left">
								<div class="car-board">
									<img src="image/car.png">
								</div>
								<div class="car-brake center">
									<!-- <div>
										<i class="fa fa-circle color-green"></i>BPS
										<i class="fa fa-circle color-red"></i>BAS
										<i class="fa fa-circle color-green"></i>TCS<br/>
										<i class="fa fa-circle color-orange"></i>ABS
										<i class="fa fa-circle color-green"></i>SCS 
										<i class="fa fa-circle color-orange"></i>BBA <br/>
										<i class="fa fa-circle color-green"></i>ABS
									</div> -->
								</div>
							</div>
							<div class="col-sm-8 car-right">
								<div class="car-light">
									<div style="float: left;">
										<i class="fa fa-lightbulb-o"></i>
									</div>
									<div style="margin-left: 46px;" id="car-light">
										<!-- <i class="fa fa-circle color-green"></i><span title="LowBeamHeadlights">LBHL</span>
										<i class="fa fa-circle color-green"></i><span title="HighBeamHeadlights">LTS</span>
										<i class="fa fa-circle color-red"></i><span title="LeftTurnSignal">RTS</span>
										<i class="fa fa-circle color-green"></i><span title="RightTurnSignal">HS</span><br/>
										<i class="fa fa-circle color-green"></i><span title="HazardSignal">ALC</span>
										<i class="fa fa-circle color-orange"></i><span title="AutomaticLightControl">HBHL</span>
										<i class="fa fa-circle color-green"></i><span title="DaytimeRunningLights">DRL</span>
										<i class="fa fa-circle color-orange"></i><span title="FogLight">FL</span>
										<i class="fa fa-circle color-green"></i><span title="ParkingLights">PL</span> -->
									</div>
								</div>
								<div class="car-information">
									<!-- <span class="car-information-item">车辆速度:</span>
									<span class="car-information-value">12.80&nbsp;M/S</span>
									<br/>

									<span class="car-information-item">车辆大小:</span>
									<span class="car-information-value">3M*3M*3M</span>
									<br/>

									<span class="car-information-item">四轴加速度:</span>
									<span class="car-information-value">3&nbsp;M/S
										<span style="vertical-align: 6px;font-size: 0.4em;">2</span>
									</span>
									<span class="car-information-value">3&nbsp;M/S
										<span style="vertical-align: 6px;font-size: 0.4em;">2</span>
									</span>
									<span class="car-information-value">3&nbsp;M/S
										<span style="vertical-align: 6px;font-size: 0.4em;">2</span>
									</span>
									<span class="car-information-value">3&nbsp;M/S
										<span style="vertical-align: 6px;font-size: 0.4em;">2</span>
									</span>
									<br/>

									<span class="car-information-item">方向盘转角:</span>
									<span class="car-information-value">45</span>度
									<br/>

									<span class="car-information-item">车速精度:</span>
									<span class="car-information-value">90</span>%
									<br/>

									<span class="car-information-item">航向精度:</span>
									<span class="car-information-value">90</span>%
									<br/>

									<span class="car-information-item">方向盘精度:</span>
									<span class="car-information-value">90</span>%
									<br/> -->

								</div>
								<div class="car-button">
									<!-- <button>历史数据</button>
									<button>当前位置</button>
									<button>轨迹追踪</button> -->

								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal -->
	</div>


	<div class="modal fade" id="Position" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="top: 10px;bottom: 10px">
		<div class="modal-dialog" style="width: 90%; height: 90%;">
			<div class="modal-content" style="height: 95%;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<h4 class="modal-title" id="myModalLabel">
						车辆位置
					</h4>
				</div>
				<div class="modal-body" style="padding: 0;height: 100%;">
					<div id="allmap" style="height: 100%; width: 100%;"></div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="route" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="top: 10px;bottom:10px">
		<div class="modal-dialog" style="width: 90%; height: 90%;">
			<div class="modal-content" style="height: 95%">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<h4 class="modal-title" id="myModalLabel">
						轨迹追踪
						<button id="gengXin" class="btn btn-default" right="10" onclick="gengXin()">停止更新</button>
					</h4>
				</div>
				<div class="modal-body" style="padding: 0; height: 100%">
					<div id="allmap2" style="height: 100%; width: 100%;"></div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="olddata" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="top: 240px;">
		<div class="modal-dialog" style="width: 700px;">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<h4 class="modal-title" id="myModalLabel">
						历史轨迹(可查询三个月内数据)
					</h4>
				</div>
				<div class="modal-body" style="padding: 0;">
					<div class="old-route-search">
						从:
						<input type="date" name="time1"> 到:
						<input type="date" name="time2">
						<button class="time_search" onclick="old_toute_search()">搜索</button>
					</div>
					<div class=time-list style="height: 300px; width: 100%; overflow: auto;">

					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="oldroute" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="top: 10px; bottom: 10px">
		<div class="modal-dialog" style="width: 90%;height: 90%;">
			<div class="modal-content" style="height:95%;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<h4 class="modal-title" id="myModalLabel">
						历史轨迹
					</h4>
				</div>
				<div class="modal-body" style="padding: 0;height: 100%;">
					<div id="allmap3" style="height: 100%; width: 100%;"></div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="team_position" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
	 style="top: 10px;bottom: 10px">
		<div class="modal-dialog" style="width: 90%; height: 90%;">
			<div class="modal-content" style="height: 95%;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<h4 class="modal-title" id="myModalLabel">
						车队位置
					</h4>
				</div>
				<div class="modal-body" style="padding: 0;height: 100%;">
					<div id="allmap4" style="height: 100%; width: 100%;"></div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="team_route" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="top: 10px;bottom:10px">
		<div class="modal-dialog" style="width: 90%; height: 90%;">
			<div class="modal-content" style="height: 95%">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<h4 class="modal-title" id="myModalLabel">
						车队轨迹
					</h4>
				</div>
				<div class="modal-body" style="padding: 0; height: 100%">
					<div id="allmap5" style="height: 100%; width: 100%;"></div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="team_old_route" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="top: 10px; bottom: 10px">
		<div class="modal-dialog" style="width: 90%;height: 90%;">
			<div class="modal-content" style="height:95%;">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						&times;
					</button>
					<h4 class="modal-title" id="myModalLabel">
						历史轨迹
					</h4>
				</div>
				<div class="modal-body" style="padding: 0;height: 100%;">
					<div id="allmap9" style="height: 100%; width: 100%;"></div>
				</div>
			</div>
		</div>
	</div>

	<!-- JQuery -->
	<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
	<script type="text/javascript">
		function change_height() {
			var width = $("body").width();
			if (width >= 766) {
				var height = $(window).height();
				$(".tab-content").height(function (n, c) {
					return height - 81 - 84 - 20;
				})

				var header_height = $(".header").height();
				$(".menu").height(function (n, c) {
					return height - header_height;
				});
				$(".control").height(function (n, c) {
					return height - header_height;
				});
			} else {
				$(".menu").height(60);
				$(".control").css('height', "auto");
				$(".menu").css("max-width", "100%");
				$(".menu").css("min-height", "0px");
			}
		}
		change_height();
		$(window).resize(function () {
			change_height();
		});
	</script>
	<!-- Cookie -->
	<script type="text/javascript" src="js/jquery.cookie.js"></script>
	<!-- Layui -->
	<script type="text/javascript" src="layui/layui.all.js"></script>
	<!-- Waypoints -->
	<script type="text/javascript" src="js/jquery.waypoints.min.js"></script>
	<!-- Main -->
	<script type="text/javascript" src="js/main.js"></script>
	<!-- Bootstrap -->
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<!-- returnTologin -->
	<script type="text/javascript" src="js/returnTologin.js"></script>
	<!-- Page.js -->
	<script type="text/javascript" src="js/pageNav.js"></script>

	<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=eCdeHKtchFu9xl467IDi3sf7RwhTxO1G"></script>

	<script type="text/javascript" src="js/car_team.js"></script>
	<script type="text/javascript">
		var car_team = new Array();

		var car_team2 = new Array();

		var x_car_num = 0;
		$(".add-car").change(function () {
			var x = $(this).children("option:selected").attr("lzw");
			var y = $(this).val();
			if (!contains(car_team2, x)) {
				car_team.push(y);
				car_team2.push(x);
				console.log(car_team);
				console.log(car_team2);
				$(".the-car").append("<div class='p-" + x_car_num + "' lzw='" + x + "'>" + y + "<i class='fa fa-remove' onclick='remove(\"" + x_car_num + "\",\"" + y + "\")'></i></div>")
				x_car_num++;
			};
			choose_leader();
			$(this).children('option:eq(0)').prop('selected', 'selected');
		})

		function remove(x, y) {
			removeByValue(car_team, y);
			$(".p-" + x).remove();
			choose_leader();
		}

		function contains(arr, obj) {
			var i = arr.length;
			while (i--) {
				if (arr[i] === obj) {
					return true;
				}
			}
			return false;
		}
		function removeByValue(arr, val) {
			for (var i = 0; i < arr.length; i++) {
				if (arr[i] == val) {
					arr.splice(i, 1);
					break;
				}
			}
		}

		function choose_leader() {
			$(".choose_leader").html('');
			for (var i = 0; i < car_team.length; i++) {
				$(".choose_leader").append("<option value='" + car_team2[i] + "'>" + car_team[i] + "</option>")
			}
		}




	</script>
</body>

</html>